{
  "hash": "da6e892150ce2606833d1127109646df",
  "result": {
    "markdown": "---\ntitle: \"Install multiple versions of R in MacOS\"\ndate: \"2022-10-31\"\ncategories: [\"MacOS\", \"R\"]\nimage: \"https://www.macworld.com/wp-content/uploads/2022/04/mac-recovery-mode.jpg\"\nformat:\n  html:\n      code-fold: false\n      code-overflow: wrap\n---\n\n\n\n\nWhenever there is new release of R at CRAN, I am always tempted to install the new version so that I can use the fancy new tools (eg. the base pipe `|>` is a life-saver for package development). However, switch to new version of R is always a pain if most of the work is dependent on the packages installed under old version. It takes time to re-install all the packages under new R version. It motivates me to install multiple versions of R in OS so that I have freedom to choose which one as active. \n\nIt is not too bad to install multiple versions under Linux OS, especially under different conda environments. However, in MacOS, the GUI installer will automatically delete old version executable and leave incomplete R framework. In this post, I will show step-by-step how to install multiple versions of R under MacOS, and switch versions of R in Rstudio.\n\nMac, by default, save R executable and relevant libraries at `/Library/Frameworks/R.framework/Versions/`. Here is the tree structure of my \"R.framework\" (`tree -L 3 /Library/Frameworks/R.framework`)\n\n\n::: {.cell}\n\n```{.bash .cell-code}\n    /Library/Frameworks/R.framework\n    ├── Headers -> Versions/Current/Headers\n    ├── Libraries -> Versions/Current/Resources/lib\n    ├── PrivateHeaders -> Versions/Current/PrivateHeaders\n    ├── R -> Versions/Current/R\n    ├── Resources -> Versions/Current/Resources\n    └── Versions\n        ├── 4.1\n        │   ├── Headers -> Resources/include\n        │   ├── PrivateHeaders\n        │   ├── R -> Resources/lib/libR.dylib\n        │   └── Resources\n        └── Current -> /Library/Frameworks/R.framework/Versions/4.1\n```\n:::\n\n\n-   The R package libraries were saved under `Resources/library`\n\n-   R which is symbolic linked to `Resources/lib/libR.dylib` is the executable.\n\nUsually, if you just download new version binary installer (`*.pkg`) from [CRAN](https://cran.r-project.org/) and use GUI to install, it will 1) remove the original executable, 2) symbolic link `Current` to the new version.\n\n## 1. Get source package\n\nget source package from https://mac.r-project.org/\n\n\n::: {.cell}\n\n```{.bash .cell-code}\n# download source\n curl -O https://mac.r-project.org/high-sierra/R-4.2-branch/x86_64/R-4.2-branch.tar.gz\n\n# extract to folder 4.2\nmkdir -p 4.2/\ntar xfzv R-4.2-branch.tar.gz --directory 4.2\n```\n:::\n\n\n## 2. Move to `R.framework` destination\n\nmove to destination folder Inside 4.2 folder will be very similar to mac structure `Library/Frameworks/R.framework/Versions/4.2`, thus copy it to mac default R folder `/Library/Frameworks/R.framework/Versions/4.2`\n\n\n::: {.cell}\n\n```{.bash .cell-code}\n# rm -rf /Library/Frameworks/R.framework/Versions/4.2\ncp -R Library/Frameworks/R.framework/Versions/4.2 /Library/Frameworks/R.framework/Versions/\n```\n:::\n\n\n## 3. Rswitch\n\n[Rswitch](https://rud.is/rswitch/) is a light-weight utility for macOS R users, which can help easily switch active R version. It basically re-establish symbolic link of `Current` mentioned above to the version you selected.\n\nAfter installation and open, Rswitch shows as a little control panel at right corner of top menu.\n\n![](./2022-10-27-macos_r_version.fig1.png){width=\"50%\"}\n\n## 4. Use different version of R in Rstudio\n\nBefore opening Rstudio, select the version you want at Rswitch. When you click the Rstudio app or R project, the Rstudio will automatically recognize the right R version to use from Console.\n\nHappy R switch!\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}